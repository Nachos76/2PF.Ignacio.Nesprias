<div class="mx-auto px-4 sm:px-8">
  <div class="py-2">
    <app-titulo-grilla
      [titulo]="titulo"
      [incluirNuevo]="true"
      (nuevoClicked)="agregarUsuario()"
    ></app-titulo-grilla>
    <div class="flex flex-col -mx-4 sm:-mx-8 px-4 sm:px-8">
      <div
        class="flex flex-row justify-center p-2"
      >
        <table
          mat-table
          [dataSource]="(tableDataSource$ | async)!"
          class="mat-elevation-z8 w-full rounded-lg overflow-hidden"
        >
          <!--- Note that these columns can be defined in any order.
        The actual rendered columns are set as a property on the row definition" -->
          <!-- ID Definition -->
          <ng-container matColumnDef="id">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-5 py-3 w-0.5 text-primary-100 uppercase font-medium"
            >
              #
            </th>
            <td
              mat-cell
              *matCellDef="let row"
              class="px-5 py-5 w-0.5"
              (click)="seleccionarUsuario(row.id)"
            >
              {{ row.id }}
            </td>
          </ng-container>

          <!-- Nombre -->
          <ng-container matColumnDef="nombre">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-5 py-3 w-0.5 text-primary-100 uppercase font-medium"
            >
              Nombre
            </th>
            <td mat-cell *matCellDef="let row" class="px-5 py-5 w-0.5">
              <div class="flex items-center">
                <app-avatar [imagen]="row.imagen"></app-avatar>
                <div class="ml-3">
                  <div class="font-semibold">
                    {{ row.nombre | nombreApellido: row.apellido:"apellido" }}
                  </div>
                </div>
              </div>
            </td>
          </ng-container>

          <!-- email -->
          <ng-container matColumnDef="email">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-5 py-3 w-0.5 text-primary-100 uppercase font-medium"
            >
              Email
            </th>
            <td mat-cell *matCellDef="let row" class="px-5 py-5 w-0.5">
              {{ row.email }}
            </td>
          </ng-container>

          <!-- country -->
          <ng-container matColumnDef="rol">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-5 py-3 w-0.5 text-primary-100 uppercase font-medium"
            >
              Rol
            </th>
            <td mat-cell *matCellDef="let row" class="px-5 py-5 w-0.5">
              {{ row.rol }}
            </td>
          </ng-container>

          <!--Acciones-->
          <ng-container matColumnDef="actions">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-5 py-3 w-0.5 text-primary-100 uppercase font-medium"
            ></th>
            <td mat-cell *matCellDef="let row; let i = index" class="px-5 py-5">
              <button
                mat-icon-button
                [matMenuTriggerFor]="appMenu"
                aria-label=""
              >
                <mat-icon>more_vert</mat-icon>
              </button>
              <mat-menu #appMenu="matMenu">
                <button
                  mat-menu-item
                  (click)="editarUsuario(i)"
                  class="text-teal-800 font-medium"
                >
                  <mat-icon class="text-teal-800 text-lg">edit</mat-icon>
                  <span>Editar</span>
                </button>
                <button
                  mat-menu-item
                  (click)="eliminarUsuario(i,row)"
                  class="text-teal-800 font-medium"
                >
                  <mat-icon class="text-teal-800 text-lg">delete</mat-icon>
                  <span>Eliminar</span>
                </button>
              </mat-menu>
            </td>
          </ng-container>

          <tr
            mat-header-row
            *matHeaderRowDef="displayedColumnsTable"
            class="w-full bg-primary-800 text-primary-300 uppercase font-semibold tracking-wider text-xs text-left border-b-2 border-primary-200 h-8"
          ></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayedColumnsTable"
            class="border-b border-gray-200 bg-white text-sm text-primary-900 cursor-pointer"
          ></tr>
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" [attr.colspan]="displayedColumnsTable.length"
            class="px-5 py-3 w-0.5 text-danger-300 uppercase font-medium text-center">
              No hay datos para mostrar.
            </td>
          </tr>
        </table>
      </div>
      <!-- <div class="flex flex-row p-2">
        <span class="text-2xl font-bold">Usuario seleccionado</span>
      </div> -->
      <!-- <div class="flex flex-row justify-center items-center p-2">
        <span
          [ngClass]="userSelect ? 'text-green-500' : 'text-danger-default'"
          class="text-lg font-bold"
          >{{
            userSelect
              ? userSelect?.nombre + " " + userSelect?.email
              : "No hay usuario seleccionado"
          }}</span
        >
        <button
          *ngIf="userSelect"
          mat-icon-button
          color="warn"
          matTooltip="Delete select user"
          aria-label="Example icon button with a home icon"
          (click)="selectUser()"
        >
          <mat-icon>cancel</mat-icon>
        </button>
      </div> -->
    </div>
  </div>
</div>
